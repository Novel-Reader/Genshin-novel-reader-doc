## 2.3 数据库设计

### 2.3.1 数据库

一个新开发的程序，需要有数据库的配合。MySQL 是一种关系数据库管理系统，它最明显的机制就是将有关联的数据各个建表，多个表格通过不同的 MySQL 语句实现对数据的增删改查，几个表格在一起相辅相成，分工明确。整体条理清晰，加快了速度并且提高了灵活性。

这里使用 MySQL 数据库，版本为 "mysql": "^2.18.1"，实现基本的增删改查，目前不考虑性能安全等问题。

本地需要新建数据库，数据库名：novel，新建数据库表 1-用户表，数据库表 2-书籍表，具体建表语句参考

```
mysqldump -u root -proot --skip-add-locks --skip-add-drop-table --skip-comments novel  > sql/mysql.sql
```

参考链接

nodejs 连接 mysql: https://michael18811380328.github.io/backend/site/nodejs/24-Node.js%20%E8%BF%9E%E6%8E%A5%20MySQL/

tablePlus 数据库软件连接本地 mysql：https://blog.csdn.net/weixin_41697143/article/details/119904196

### 2.3.2 开发问题及解决

#### 数据库端口号冲突

默认 mysql 的端口号是 3306 端口，如果本地装有多个 mysql 数据库，例如 docker 内部也跑的一个，可能造成另一个无法正常启动。

实际环境中不可能有两个 mysql 在不同的端口跑。所以可以本地只开发一个项目，或者临时改一下数据库的端口号等。

#### 数据库存储小说会不会太长

查阅数据库资料，logntext 字段的长度足够长，存放一个 10MB 的小说也绰绰有余。

执行查询语句时，可以不返回小说详情，先返回小说的标题等信息，这样查询的速度回更快。

如果用户上传了非法文件（超过了最大上传限制），那么提示错误，不支持上传；如果少数文件特别大，可以直接放在服务器硬盘上，不需要放在数据库中。

#### 数据库分页查找

如果想加载某个章节的数据，能否从 longtext 字段中返回指定的字符串，不需要一次性返回全部的页面
